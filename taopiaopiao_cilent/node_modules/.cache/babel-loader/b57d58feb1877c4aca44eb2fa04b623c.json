{"ast":null,"code":"var _jsxFileName = \"E:\\\\H5\\\\react\\\\taopiaopiao\\\\src\\\\components\\\\Movie.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport { List, Tag, Popover, NavBar, Icon } from 'antd-mobile';\nimport './Movie.css';\nconst Item = List.Item;\nconst Brief = Item.Brief;\nconst PopoverItem = Popover.Item;\nexport default class movie extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      homeobj: props.homeobj,\n      visible: false,\n      selected: '',\n      list: [// {\n        //     id: 1,\n        //     cinema: \"重庆博纳电影院\",\n        //     minprice: 19.9,\n        //     address: \"沙坪坝区凤天大道37号（第三军医大对面）\",\n        //     Tag1: 1,\n        //     Tag2: 1,\n        //     Tag3: 0,\n        //     Tag4: 1,\n        // },\n        // {\n        //     id: 2,\n        //     cinema: \"UME影城（重庆北碚店）\",\n        //     minprice: 16.5,\n        //     address: \"北碚区康宁路58号\",\n        //     Tag1: 1,\n        //     Tag2: 0,\n        //     Tag3: 0,\n        //     Tag4: 1,\n        // },\n        // {\n        //     id: 3,\n        //     cinema: \"华谊兄弟电影（南坪店）\",\n        //     minprice: 25.5,\n        //     address: \"南岸区南坪西路38号\",\n        //     Tag1: 1,\n        //     Tag2: 1,\n        //     Tag3: 0,\n        //     Tag4: 1,\n        // }\n      ]\n    };\n  }\n\n  componentDidMount() {\n    let that = this;\n    $.ajax({\n      url: \"http://localhost:9000/A\",\n      type: \"GET\",\n      dataType: \"text\",\n\n      success(data) {\n        if (data) {\n          data = JSON.parse(data);\n          this.setState({\n            list: data\n          });\n          console.log(data);\n        } else {}\n      },\n\n      error() {}\n\n    });\n  } //点击某一项的回调函数\n\n\n  onSelect(opt) {\n    console.log(opt.props.value); //按价格升序的方式给电影院排序\n\n    if (opt.props.value == \"价格最低\") {\n      let arr = this.state.list;\n      arr.sort(function (obj1, obj2) {\n        let price1 = obj1.minprice;\n        let price2 = obj2.minprice;\n\n        if (price1 < price2) {\n          return -1;\n        } else if (price1 > price2) {\n          return 1;\n        } else {\n          return 0;\n        }\n      });\n      this.setState({\n        visible: false,\n        selected: opt.props.value,\n        list: arr\n      });\n    } //筛选出有特价票的电影院\n    else if (opt.props.value == \"特价票\") {\n        let arr = this.state.list;\n        let result = [];\n        let i = 0;\n\n        while (i < arr.length) {\n          if (arr[i].Tag2 == 1) {\n            result.push(arr[i]);\n          }\n\n          i++;\n        }\n\n        this.setState({\n          visible: false,\n          selected: opt.props.value,\n          list: result\n        });\n      } //筛选出可以停车的电影院\n      else {\n          let arr = this.state.list;\n          let result = [];\n          let i = 0;\n\n          while (i < arr.length) {\n            if (arr[i].Tag4 == 1) {\n              result.push(arr[i]);\n            }\n\n            i++;\n          }\n\n          this.setState({\n            visible: false,\n            selected: opt.props.value,\n            list: result\n          });\n        }\n  }\n\n  toCinema(id) {\n    console.log(id);\n    this.state.homeobj.props.history.push({\n      pathname: \"/cinema\",\n      query: {\n        id: id\n      }\n    });\n  } //列表渲染\n\n\n  List() {\n    const listItems = this.state.list.map(item => {\n      return React.createElement(\"div\", {\n        key: item.id,\n        onClick: this.toCinema.bind(this, item.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(List, {\n        renderHeader: () => 'Align Vertical Center',\n        className: \"my-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Item, {\n        multipleLine: true,\n        extra: item.minprice + \"起\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, item.cinema, \" \", React.createElement(Brief, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, item.address), React.createElement(Tag, {\n        small: true,\n        style: {\n          color: '#FF2E62'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, item.Tag1 == 1 ? \"可领影城劵\" : \"\"), React.createElement(Tag, {\n        small: true,\n        style: {\n          color: '#FF9C1C'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, item.Tag2 == 1 ? \"特价票\" : \"\"), React.createElement(Tag, {\n        small: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, item.Tag3 == 1 ? \"vip厅\" : \"普通厅\"), React.createElement(Tag, {\n        small: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, item.Tag4 == 1 ? \"可停车\" : \"不可停车\"))));\n    });\n    return listItems;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: '100%',\n        height: '3rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      mode: \"light\",\n      rightContent: React.createElement(Popover, {\n        mask: true,\n        overlayClassName: \"fortest\",\n        overlayStyle: {\n          color: 'currentColor'\n        },\n        visible: this.state.visible,\n        overlay: [React.createElement(PopoverItem, {\n          key: \"4\",\n          value: \"\\u7279\\u4EF7\\u7968\",\n          \"data-seed\": \"logId\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, \"\\u7279\\u4EF7\\u7968\"), React.createElement(PopoverItem, {\n          key: \"5\",\n          value: \"\\u4EF7\\u683C\\u6700\\u4F4E\",\n          style: {\n            whiteSpace: 'nowrap'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, \"\\u4EF7\\u683C\\u6700\\u4F4E\"), React.createElement(PopoverItem, {\n          key: \"6\",\n          value: \"\\u53EF\\u505C\\u8F66\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            marginRight: 5\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, \"\\u53EF\\u505C\\u8F66\"))],\n        align: {\n          overflow: {\n            adjustY: 0,\n            adjustX: 0\n          },\n          offset: [-10, 0]\n        } // onVisibleChange={this.handleVisibleChange}\n        ,\n        onSelect: this.onSelect.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          height: '100%',\n          padding: '0 15px',\n          marginRight: '-15px',\n          display: 'flex',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"ellipsis\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"\\u7535\\u5F71\\u9662\")), this.List());\n  }\n\n}","map":{"version":3,"sources":["E:/H5/react/taopiaopiao/src/components/Movie.js"],"names":["React","Component","$","List","Tag","Popover","NavBar","Icon","Item","Brief","PopoverItem","movie","constructor","props","state","homeobj","visible","selected","list","componentDidMount","that","ajax","url","type","dataType","success","data","JSON","parse","setState","console","log","error","onSelect","opt","value","arr","sort","obj1","obj2","price1","minprice","price2","result","i","length","Tag2","push","Tag4","toCinema","id","history","pathname","query","listItems","map","item","bind","cinema","address","color","Tag1","Tag3","render","width","height","whiteSpace","marginRight","overflow","adjustY","adjustX","offset","padding","display","alignItems"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport $ from 'jquery';\r\nimport { List, Tag, Popover, NavBar, Icon } from 'antd-mobile';\r\nimport './Movie.css'\r\nconst Item = List.Item;\r\nconst Brief = Item.Brief;\r\nconst PopoverItem = Popover.Item;\r\nexport default class movie extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            homeobj:props.homeobj,\r\n            visible: false,\r\n            selected: '',\r\n            list: [\r\n                // {\r\n                //     id: 1,\r\n                //     cinema: \"重庆博纳电影院\",\r\n                //     minprice: 19.9,\r\n                //     address: \"沙坪坝区凤天大道37号（第三军医大对面）\",\r\n                //     Tag1: 1,\r\n                //     Tag2: 1,\r\n                //     Tag3: 0,\r\n                //     Tag4: 1,\r\n                // },\r\n                // {\r\n                //     id: 2,\r\n                //     cinema: \"UME影城（重庆北碚店）\",\r\n                //     minprice: 16.5,\r\n                //     address: \"北碚区康宁路58号\",\r\n                //     Tag1: 1,\r\n                //     Tag2: 0,\r\n                //     Tag3: 0,\r\n                //     Tag4: 1,\r\n                // },\r\n                // {\r\n                //     id: 3,\r\n                //     cinema: \"华谊兄弟电影（南坪店）\",\r\n                //     minprice: 25.5,\r\n                //     address: \"南岸区南坪西路38号\",\r\n                //     Tag1: 1,\r\n                //     Tag2: 1,\r\n                //     Tag3: 0,\r\n                //     Tag4: 1,\r\n                // }\r\n            ]\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        let that=this;\r\n        $.ajax({\r\n            url: \"http://localhost:9000/A\",\r\n            type: \"GET\",\r\n            dataType: \"text\",\r\n            success(data) {\r\n              if (data) {\r\n                data = JSON.parse(data);\r\n                this.setState({\r\n                    list:data\r\n                })\r\n                console.log(data);\r\n              }\r\n              else {\r\n              }\r\n            },\r\n            error() {\r\n      \r\n            }\r\n          })\r\n    }\r\n    //点击某一项的回调函数\r\n    onSelect(opt) {\r\n        console.log(opt.props.value);\r\n        //按价格升序的方式给电影院排序\r\n        if (opt.props.value == \"价格最低\") {\r\n            let arr = this.state.list;\r\n            arr.sort(function (obj1, obj2) {\r\n                let price1 = obj1.minprice;\r\n                let price2 = obj2.minprice;\r\n                if (price1 < price2) {\r\n                    return -1;\r\n                } else if (price1 > price2) {\r\n                    return 1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n\r\n            })\r\n            this.setState({\r\n                visible: false,\r\n                selected: opt.props.value,\r\n                list: arr\r\n            });\r\n        }\r\n        //筛选出有特价票的电影院\r\n        else if (opt.props.value == \"特价票\") {\r\n            let arr = this.state.list;\r\n            let result = [];\r\n            let i = 0;\r\n            while (i < arr.length) {\r\n                if (arr[i].Tag2 == 1) {\r\n                    result.push(arr[i]);\r\n                }\r\n                i++;\r\n            }\r\n            this.setState({\r\n                visible: false,\r\n                selected: opt.props.value,\r\n                list: result\r\n            });\r\n        }\r\n        //筛选出可以停车的电影院\r\n        else  {\r\n            let arr = this.state.list;\r\n            let result = [];\r\n            let i = 0;\r\n            while (i < arr.length) {\r\n                if (arr[i].Tag4 == 1) {\r\n                    result.push(arr[i]);\r\n                }\r\n                i++;\r\n            }\r\n            this.setState({\r\n                visible: false,\r\n                selected: opt.props.value,\r\n                list: result\r\n            });\r\n        }\r\n    };\r\n    toCinema(id){\r\n        console.log(id);\r\n        this.state.homeobj.props.history.push({ pathname: \"/cinema\", query: { id: id } });\r\n    }\r\n    //列表渲染\r\n    List() {\r\n        const listItems = this.state.list.map((item) => {\r\n            return (\r\n                <div key={item.id} onClick={this.toCinema.bind(this,item.id)}>\r\n                    <List renderHeader={() => 'Align Vertical Center'} className=\"my-list\">\r\n                        <Item multipleLine extra={item.minprice + \"起\"}>\r\n                            {item.cinema} <Brief>{item.address}</Brief>\r\n                            <Tag small style={{ color: '#FF2E62' }}>{item.Tag1 == 1 ? \"可领影城劵\" : \"\"}</Tag>\r\n                            <Tag small style={{ color: '#FF9C1C' }}>{item.Tag2 == 1 ? \"特价票\" : \"\"}</Tag>\r\n                            <Tag small>{item.Tag3 == 1 ? \"vip厅\" : \"普通厅\"}</Tag>\r\n                            <Tag small>{item.Tag4 == 1 ? \"可停车\" : \"不可停车\"}</Tag>\r\n                        </Item>\r\n                    </List>\r\n                </div>\r\n            )\r\n        }\r\n        );\r\n        return listItems\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div style={{ width: '100%', height: '3rem' }}>\r\n                    <NavBar\r\n                        mode=\"light\"\r\n                        rightContent={\r\n                            <Popover mask\r\n                                overlayClassName=\"fortest\"\r\n                                overlayStyle={{ color: 'currentColor' }}\r\n                                visible={this.state.visible}\r\n                                overlay={[\r\n                                    (<PopoverItem key=\"4\" value=\"特价票\" data-seed=\"logId\">特价票</PopoverItem>),\r\n                                    (<PopoverItem key=\"5\" value=\"价格最低\" style={{ whiteSpace: 'nowrap' }}>价格最低</PopoverItem>),\r\n                                    (<PopoverItem key=\"6\" value=\"可停车\" >\r\n                                        <span style={{ marginRight: 5 }}>可停车</span>\r\n                                    </PopoverItem>),\r\n                                ]}\r\n                                align={{\r\n                                    overflow: { adjustY: 0, adjustX: 0 },\r\n                                    offset: [-10, 0],\r\n                                }}\r\n                                // onVisibleChange={this.handleVisibleChange}\r\n                                onSelect={this.onSelect.bind(this)}\r\n                            >\r\n                                <div style={{\r\n                                    height: '100%',\r\n                                    padding: '0 15px',\r\n                                    marginRight: '-15px',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                }}\r\n                                >\r\n                                    <Icon type=\"ellipsis\" />\r\n                                </div>\r\n                            </Popover>\r\n                        }\r\n                    >\r\n                        电影院\r\n      </NavBar>\r\n                </div>\r\n                {this.List()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}