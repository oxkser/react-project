{"ast":null,"code":"import _classCallCheck from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{List,Tag}from'antd-mobile';import cookie from'react-cookies';import $ from'jquery';import Swiper from'../components/Swiper';import'../components/Cinema.css';var Item=List.Item;var Brief=Item.Brief;var Cinema=/*#__PURE__*/function(_Component){_inherits(Cinema,_Component);function Cinema(props){var _this;_classCallCheck(this,Cinema);_this=_possibleConstructorReturn(this,_getPrototypeOf(Cinema).call(this,props));_this.state={item:_this.props.location.query,data2:[]};return _this;}_createClass(Cinema,[{key:\"componentDidMount\",value:function componentDidMount(){var that=this;var id=this.state.item.id;$.ajax({url:\"http://localhost:9000/cplayplan\",type:\"GET\",data:{cid:id},dataType:\"text\",success:function success(data){if(data){data=JSON.parse(data);that.setState({data2:data});console.log(that.state.data2);}else{}},error:function error(){}});}//跳转到购买电影票界面\n},{key:\"toPurchase\",value:function toPurchase(cinname,movietitle,movieimage,playprice,playdate,playtime){this.props.history.push({pathname:\"/purchase\",query:{cinname:cinname,movietitle:movietitle,movieimage:movieimage,playprice:playprice,playdate:playdate,playtime:playtime}});}//渲染日期\n},{key:\"time\",value:function time(){var date=this.state.data2[0];if(date!=undefined){date=date.playdate.substring(5,10);console.log(date);return React.createElement(\"div\",{className:\"datecontainer\"},React.createElement(\"div\",{className:\"datetitle\"},\"\\u65E5\\u671F\"),React.createElement(\"div\",{className:\"date\"},date));}}//渲染播放列表\n},{key:\"list\",value:function list(){var _this2=this;var listItems=this.state.data2.map(function(item,index){//电影开始时间\nvar playtime=item.playtime.substring(0,5);//电影结束的小时数\nvar hour=Number(playtime.substring(0,2));//电影结束的分钟数\nvar minute=Number(playtime.substring(3,5))+Number(item.movielength);if(minute>60){hour=hour+Number(Math.floor(minute/60));minute=Math.floor(minute%60);if(minute<10){minute=\"0\"+minute;}}var quiettime=hour+\":\"+minute;return React.createElement(\"div\",{className:\"play\",key:index,onClick:_this2.toPurchase.bind(_this2,item.cinname,item.movietitle,item.movieimage,item.playprice,item.playdate,item.playtime)},React.createElement(List,{renderHeader:function renderHeader(){return'Align Vertical Center';},className:\"my-list\"},React.createElement(Item,{multipleLine:true,extra:'￥'+item.playprice},playtime,\" \",React.createElement(Brief,null,quiettime+'散场'),React.createElement(\"div\",{className:\"cinname\"},item.movietitle),React.createElement(\"div\",{className:\"sort\"},item.movietype))));});return listItems;}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(List,{className:\"my-list\"},React.createElement(Item,{multipleLine:true},React.createElement(\"span\",{style:{fontWeight:'bold'}},this.state.item.cinname),\" \",React.createElement(Brief,null,this.state.item.address),React.createElement(Tag,{small:true,style:{color:'#FF2E62'}},this.state.item.act1==1?\"可领影城劵\":\"\"),React.createElement(Tag,{small:true,style:{color:'#FF9C1C'}},this.state.item.act2==1?\"特价票\":\"\"),React.createElement(Tag,{small:true},this.state.item.act3==1?\"vip厅\":\"普通厅\"),React.createElement(Tag,{small:true},this.state.item.act4==1?\"可停车\":\"不可停车\"))),React.createElement(Swiper,null),React.createElement(\"div\",null,React.createElement(\"div\",null,this.time()),this.list()));}}]);return Cinema;}(Component);export{Cinema as default};","map":{"version":3,"sources":["E:/H5/react/taopiaopiao/taopiaopiao_cilent/src/views/Cinema.js"],"names":["React","Component","List","Tag","cookie","$","Swiper","Item","Brief","Cinema","props","state","item","location","query","data2","that","id","ajax","url","type","data","cid","dataType","success","JSON","parse","setState","console","log","error","cinname","movietitle","movieimage","playprice","playdate","playtime","history","push","pathname","date","undefined","substring","listItems","map","index","hour","Number","minute","movielength","Math","floor","quiettime","toPurchase","bind","movietype","fontWeight","address","color","act1","act2","act3","act4","time","list"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { List, Tag, } from 'antd-mobile';\r\nimport cookie from 'react-cookies'\r\nimport $ from 'jquery';\r\nimport Swiper from '../components/Swiper'\r\nimport '../components/Cinema.css'\r\nconst Item = List.Item;\r\nconst Brief = Item.Brief;\r\nexport default class Cinema extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      item: this.props.location.query,\r\n      data2: []\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    let that = this;\r\n    let id = this.state.item.id;\r\n    $.ajax({\r\n      url: \"http://localhost:9000/cplayplan\",\r\n      type: \"GET\",\r\n      data: {\r\n        cid: id\r\n      },\r\n      dataType: \"text\",\r\n      success(data) {\r\n        if (data) {\r\n          data = JSON.parse(data);\r\n          that.setState({\r\n            data2: data\r\n          })\r\n          console.log(that.state.data2);\r\n        }\r\n        else {\r\n        }\r\n      },\r\n      error() {\r\n\r\n      }\r\n    })\r\n  }\r\n  //跳转到购买电影票界面\r\n  toPurchase(cinname,movietitle,movieimage,playprice,playdate,playtime){\r\n    this.props.history.push({\r\n      pathname: \"/purchase\",\r\n      query: {\r\n          cinname: cinname,\r\n          movietitle: movietitle,\r\n          movieimage:movieimage,\r\n          playprice: playprice,\r\n          playdate: playdate,\r\n          playtime:playtime\r\n      }\r\n  })\r\n}\r\n  //渲染日期\r\n  time(){\r\n    let date=this.state.data2[0];\r\n    if(date!=undefined){\r\n      date=date.playdate.substring(5,10)\r\n      console.log(date);\r\n      return(\r\n        <div className=\"datecontainer\">\r\n          <div className=\"datetitle\">日期</div>\r\n          <div className=\"date\">{date}</div>\r\n        </div>\r\n      )\r\n    }\r\n    \r\n  }\r\n  //渲染播放列表\r\n  list() {\r\n    const listItems = this.state.data2.map((item,index) => {\r\n      //电影开始时间\r\n      let playtime=item.playtime.substring(0,5);\r\n      //电影结束的小时数\r\n      let hour=Number(playtime.substring(0,2));\r\n      //电影结束的分钟数\r\n      let minute=Number(playtime.substring(3,5))+Number(item.movielength);\r\n      if(minute>60){\r\n        hour=hour+Number(Math.floor(minute/60));\r\n        minute=Math.floor(minute%60);\r\n        if(minute<10){\r\n          minute=\"0\"+minute;\r\n        }\r\n      }\r\n      let quiettime=hour+\":\"+minute;\r\n      return (\r\n        <div className=\"play\" key={index} onClick={this.toPurchase.bind(this,item.cinname,item.movietitle,item.movieimage,item.playprice,item.playdate,item.playtime)}>\r\n          <List renderHeader={() => 'Align Vertical Center'} className=\"my-list\">\r\n            <Item multipleLine extra={'￥'+item.playprice}>\r\n              {playtime} <Brief>{quiettime+'散场'}</Brief>\r\n              <div className=\"cinname\">{item.movietitle}</div>\r\n              <div className=\"sort\">{item.movietype}</div>\r\n            </Item>\r\n\r\n          </List>\r\n        </div>\r\n      )\r\n    }\r\n    );\r\n    return listItems\r\n  }\r\n  render() {\r\n  \r\n    return (\r\n      <div>\r\n        <List className=\"my-list\">\r\n          <Item multipleLine >\r\n            <span style={{ fontWeight: 'bold' }}>\r\n              {this.state.item.cinname}\r\n            </span> <Brief>{this.state.item.address}</Brief>\r\n            <Tag small style={{ color: '#FF2E62' }}>{this.state.item.act1 == 1 ? \"可领影城劵\" : \"\"}</Tag>\r\n            <Tag small style={{ color: '#FF9C1C' }}>{this.state.item.act2 == 1 ? \"特价票\" : \"\"}</Tag>\r\n            <Tag small>{this.state.item.act3 == 1 ? \"vip厅\" : \"普通厅\"}</Tag>\r\n            <Tag small>{this.state.item.act4 == 1 ? \"可停车\" : \"不可停车\"}</Tag>\r\n          </Item>\r\n        </List>\r\n        <Swiper></Swiper>\r\n        <div>\r\n          <div>{this.time()}</div>\r\n          {this.list()}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}