{"ast":null,"code":"import _classCallCheck from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import $ from'jquery';import'../components/MovieDetail.css';var MovieDetail=/*#__PURE__*/function(_Component){_inherits(MovieDetail,_Component);function MovieDetail(props){var _this;_classCallCheck(this,MovieDetail);_this=_possibleConstructorReturn(this,_getPrototypeOf(MovieDetail).call(this,props));_this.state={detail:{}};return _this;}_createClass(MovieDetail,[{key:\"componentDidMount\",value:function componentDidMount(){var that=this;var title=this.props.location.query.title;// let title = '海上钢琴师'\n$.ajax({url:\"http://localhost:9000/finded\",type:\"GET\",data:{title:title},dataType:\"text\",success:function success(data){if(data){data=JSON.parse(data);that.setState({detail:data[0]});console.log(that.state.detail);}},error:function error(){}});}},{key:\"toHome\",value:function toHome(){this.props.history.push('/');}},{key:\"showDetail\",value:function showDetail(){console.log(this.state.detail);if(this.state.detail!={}){//从对象里取出来的moviedate数据在数据库里是date类型，不是字符串，无法调用substring方法，先转换为string类型\nvar moviedate=String(this.state.detail.moviedate).substring(0,10);}return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"nav-top1\"}),React.createElement(\"div\",{className:\"nav-middle1\"},React.createElement(\"div\",{className:\"top-content1\"},React.createElement(\"div\",{className:\"detail1\"},React.createElement(\"div\",{style:{borderBottom:'1px solid #ddd'}},React.createElement(\"img\",{className:\"movieimage1\",src:this.state.detail.movieimage}),React.createElement(\"div\",{className:\"moviedetail1\"},React.createElement(\"div\",{className:\"movietitle1\"},this.state.detail.movietitle),React.createElement(\"div\",{style:{margin:'0.5rem 0'}},this.state.detail.movietype,\"\\xA0\",'/'+this.state.detail.moviearea,\"\\xA0\",'/'+this.state.detail.movielength+'分钟'),React.createElement(\"div\",{style:{margin:'0.5rem 0'}},'上映时间:'+moviedate),React.createElement(\"div\",{style:{margin:'0.5rem 0',width:'12rem',overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}},'导演:'+this.state.detail.moviedirect),React.createElement(\"div\",{style:{margin:'0.5rem 0',width:'12rem',overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}},'演员:'+this.state.detail.moviestar))),React.createElement(\"div\",{className:\"change1\"},React.createElement(\"div\",{className:\"title\"},\"\\u6DD8\\u7968\\u7968\\u8BC4\\u5206:\"),React.createElement(\"div\",{className:\"title-mark\"},this.state.detail.moviemark)))),React.createElement(\"div\",{className:\"center-content1\"},React.createElement(\"div\",{className:\"info\"},\"\\u7B80\\u4ECB\\uFF1A\"),React.createElement(\"div\",{className:\"count\"},this.state.detail.moviecount)),React.createElement(\"div\",{className:\"purchase1\",onClick:this.toHome.bind(this)},\"\\u7279\\u60E0\\u9009\\u5EA7\")));}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,\" \",this.showDetail());}}]);return MovieDetail;}(Component);export{MovieDetail as default};","map":{"version":3,"sources":["E:/H5/react/taopiaopiao/src/views/MovieDetail.js"],"names":["React","Component","$","MovieDetail","props","state","detail","that","title","location","query","ajax","url","type","data","dataType","success","JSON","parse","setState","console","log","error","history","push","moviedate","String","substring","borderBottom","movieimage","movietitle","margin","movietype","moviearea","movielength","width","overflow","whiteSpace","textOverflow","moviedirect","moviestar","moviemark","moviecount","toHome","bind","showDetail"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport $ from 'jquery';\r\nimport '../components/MovieDetail.css'\r\nexport default class MovieDetail extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            detail: {}\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        let that = this;\r\n        let title = this.props.location.query.title;\r\n        // let title = '海上钢琴师'\r\n        $.ajax({\r\n            url: \"http://localhost:9000/finded\",\r\n            type: \"GET\",\r\n            data: {\r\n                title: title\r\n            },\r\n            dataType: \"text\",\r\n            success(data) {\r\n                if (data) {\r\n                    data = JSON.parse(data);\r\n                    that.setState({\r\n                        detail: data[0]\r\n                    })\r\n                    console.log(that.state.detail)\r\n                }\r\n            },\r\n            error() {\r\n\r\n            }\r\n        });\r\n    }\r\n    toHome() {\r\n        this.props.history.push('/')\r\n    }\r\n    showDetail() {\r\n        console.log(this.state.detail)\r\n        if(this.state.detail!={}){\r\n            //从对象里取出来的moviedate数据在数据库里是date类型，不是字符串，无法调用substring方法，先转换为string类型\r\n       var moviedate= String( this.state.detail.moviedate).substring(0,10);\r\n        }\r\n        return (\r\n            <div>\r\n                <div className='nav-top1'></div>\r\n                <div className='nav-middle1'>\r\n                    <div className='top-content1'>\r\n                        <div className='detail1'>\r\n                            <div style={{ borderBottom: '1px solid #ddd' }}>\r\n                                <img className='movieimage1' src={this.state.detail.movieimage} />\r\n                                <div className='moviedetail1'>\r\n                                    <div className='movietitle1'>{this.state.detail.movietitle}</div>\r\n                                    <div style={{ margin: '0.5rem 0' }}>{this.state.detail.movietype}&nbsp;{'/' + this.state.detail.moviearea}&nbsp;{'/' + this.state.detail.movielength + '分钟'}</div>\r\n                                    <div style={{ margin: '0.5rem 0' }}>{'上映时间:'+moviedate}</div>\r\n                                    <div style={{ margin: '0.5rem 0',width:'12rem',overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis' }}>{'导演:'+this.state.detail.moviedirect}</div>\r\n                                    <div style={{ margin: '0.5rem 0',width:'12rem',overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis' }}>{'演员:'+this.state.detail.moviestar}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"change1\">\r\n                                <div className='title'>淘票票评分:</div>\r\n                                <div className='title-mark'>{this.state.detail.moviemark}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='center-content1'>\r\n                        <div className='info'>简介：</div>\r\n                        <div className='count'>{this.state.detail.moviecount}</div>\r\n                    </div>\r\n                    <div className='purchase1' onClick={this.toHome.bind(this)} >\r\n                        特惠选座\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    render() {\r\n        return (\r\n            <div> {this.showDetail()}</div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}