{"ast":null,"code":"import _defineProperty from \"E:\\\\H5\\\\react\\\\taopiaopiao\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\H5\\\\react\\\\taopiaopiao\\\\src\\\\components\\\\List.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint no-dupe-keys: 0 */\nimport React from 'react';\nimport './List.css';\nimport { ListView } from 'antd-mobile';\nconst NUM_ROWS = 20;\nlet pageIndex = 0;\n\nfunction genData(pIndex = 0) {\n  const dataBlob = {};\n\n  for (let i = 0; i < NUM_ROWS; i++) {\n    const ii = pIndex * NUM_ROWS + i;\n    dataBlob[\"\".concat(ii)] = \"row - \".concat(ii);\n  }\n\n  return dataBlob;\n}\n\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onEndReached = event => {\n      // load new data\n      // hasMore: from backend data, indicates whether it is the last page, here is false\n      if (this.state.isLoading && !this.state.hasMore) {\n        return;\n      }\n\n      console.log('reach end', event);\n      this.setState({\n        isLoading: true\n      });\n      setTimeout(() => {\n        this.rData = _objectSpread({}, this.rData, {}, genData(++pageIndex));\n        this.setState({\n          dataSource: this.state.dataSource.cloneWithRows(this.rData),\n          isLoading: false\n        });\n      }, 1000);\n    };\n\n    const dataSource = new ListView.DataSource({\n      rowHasChanged: (row1, row2) => row1 !== row2\n    });\n    this.state = {\n      dataSource,\n      isLoading: true,\n      data: [{\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: '',\n        des: '不是所有的兼职汪都需要风吹日晒'\n      }, {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'McDonald\\'s invites you',\n        des: '不是所有的兼职汪都需要风吹日晒'\n      }, {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'Eat the week',\n        des: '不是所有的兼职汪都需要风吹日晒'\n      }]\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.rData = genData();\n      this.setState({\n        dataSource: this.state.dataSource.cloneWithRows(this.rData),\n        isLoading: false\n      });\n    }, 600);\n  } // If you use redux, the data maybe at props, you need use `componentWillReceiveProps`\n  // componentWillReceiveProps(nextProps) {\n  //   if (nextProps.dataSource !== this.props.dataSource) {\n  //     this.setState({\n  //       dataSource: this.state.dataSource.cloneWithRows(nextProps.dataSource),\n  //     });\n  //   }\n  // }\n\n\n  render() {\n    const separator = (sectionID, rowID) => React.createElement(\"div\", {\n      key: \"\".concat(sectionID, \"-\").concat(rowID),\n      style: {\n        backgroundColor: '#F5F5F9',\n        height: 8,\n        borderTop: '1px solid #ECECED',\n        borderBottom: '1px solid #ECECED'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    });\n\n    let index = this.state.data.length - 1;\n\n    const row = (rowData, sectionID, rowID) => {\n      if (index < 0) {\n        index = this.state.data.length - 1;\n      }\n\n      const obj = this.state.data[index];\n      return React.createElement(\"div\", {\n        key: rowID,\n        style: {\n          padding: '0 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          lineHeight: '50px',\n          color: '#888',\n          fontSize: 18,\n          borderBottom: '1px solid #F6F6F6'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, obj.title), React.createElement(\"div\", {\n        style: {\n          display: '-webkit-box',\n          display: 'flex',\n          padding: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: '64px',\n          marginRight: '15px'\n        },\n        src: obj.img,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          lineHeight: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, obj.des), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: '30px',\n          color: '#FF6E27'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, rowID), \"\\xA5\"))));\n    };\n\n    return React.createElement(ListView, {\n      ref: el => this.lv = el,\n      initialListSize: this.state.data.length,\n      dataSource: this.state.dataSource,\n      renderHeader: () => React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"header\"),\n      renderFooter: () => React.createElement(\"div\", {\n        style: {\n          padding: 30,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, this.state.isLoading ? 'Loading...' : 'Loaded'),\n      renderRow: row,\n      renderSeparator: separator,\n      className: \"am-list\",\n      pageSize: 4,\n      useBodyScroll: true,\n      onScroll: () => {\n        console.log('scroll');\n      },\n      scrollRenderAheadDistance: 500,\n      onEndReached: this.onEndReached,\n      onEndReachedThreshold: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    });\n  }\n\n}","map":{"version":3,"sources":["E:/H5/react/taopiaopiao/src/components/List.js"],"names":["React","ListView","NUM_ROWS","pageIndex","genData","pIndex","dataBlob","i","ii","List","Component","constructor","props","onEndReached","event","state","isLoading","hasMore","console","log","setState","setTimeout","rData","dataSource","cloneWithRows","DataSource","rowHasChanged","row1","row2","data","img","title","des","componentDidMount","render","separator","sectionID","rowID","backgroundColor","height","borderTop","borderBottom","index","length","row","rowData","obj","padding","lineHeight","color","fontSize","display","marginRight","marginBottom","fontWeight","el","lv","textAlign"],"mappings":"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","sourcesContent":["/* eslint no-dupe-keys: 0 */\r\nimport React from 'react';\r\nimport './List.css'\r\nimport { ListView } from 'antd-mobile';\r\n\r\n\r\nconst NUM_ROWS = 20;\r\nlet pageIndex = 0;\r\n\r\nfunction genData(pIndex = 0) {\r\n  const dataBlob = {};\r\n  for (let i = 0; i < NUM_ROWS; i++) {\r\n    const ii = (pIndex * NUM_ROWS) + i;\r\n    dataBlob[`${ii}`] = `row - ${ii}`;\r\n  }\r\n  return dataBlob;\r\n}\r\n\r\nexport default class List extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const dataSource = new ListView.DataSource({\r\n      rowHasChanged: (row1, row2) => row1 !== row2,\r\n    });\r\n\r\n    this.state = {\r\n      dataSource,\r\n      isLoading: true,\r\n       data:[\r\n        {\r\n          img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\r\n          title: '',\r\n          des: '不是所有的兼职汪都需要风吹日晒',\r\n        },\r\n        {\r\n          img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\r\n          title: 'McDonald\\'s invites you',\r\n          des: '不是所有的兼职汪都需要风吹日晒',\r\n        },\r\n        {\r\n          img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\r\n          title: 'Eat the week',\r\n          des: '不是所有的兼职汪都需要风吹日晒',\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  \r\n    setTimeout(() => {\r\n      this.rData = genData();\r\n      this.setState({\r\n        dataSource: this.state.dataSource.cloneWithRows(this.rData),\r\n        isLoading: false,\r\n      });\r\n    }, 600);\r\n  }\r\n\r\n  // If you use redux, the data maybe at props, you need use `componentWillReceiveProps`\r\n  // componentWillReceiveProps(nextProps) {\r\n  //   if (nextProps.dataSource !== this.props.dataSource) {\r\n  //     this.setState({\r\n  //       dataSource: this.state.dataSource.cloneWithRows(nextProps.dataSource),\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  onEndReached = (event) => {\r\n    // load new data\r\n    // hasMore: from backend data, indicates whether it is the last page, here is false\r\n    if (this.state.isLoading && !this.state.hasMore) {\r\n      return;\r\n    }\r\n    console.log('reach end', event);\r\n    this.setState({ isLoading: true });\r\n    setTimeout(() => {\r\n      this.rData = { ...this.rData, ...genData(++pageIndex) };\r\n      this.setState({\r\n        dataSource: this.state.dataSource.cloneWithRows(this.rData),\r\n        isLoading: false,\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  render() {\r\n    const separator = (sectionID, rowID) => (\r\n      <div\r\n        key={`${sectionID}-${rowID}`}\r\n        style={{\r\n          backgroundColor: '#F5F5F9',\r\n          height: 8,\r\n          borderTop: '1px solid #ECECED',\r\n          borderBottom: '1px solid #ECECED',\r\n        }}\r\n      />\r\n    );\r\n    let index = this.state.data.length - 1;\r\n    const row = (rowData, sectionID, rowID) => {\r\n      if (index < 0) {\r\n        index = this.state.data.length - 1;\r\n      }\r\n      const obj = this.state.data[index];\r\n      return (\r\n        <div key={rowID} style={{ padding: '0 15px' }}>\r\n          <div\r\n            style={{\r\n              lineHeight: '50px',\r\n              color: '#888',\r\n              fontSize: 18,\r\n              borderBottom: '1px solid #F6F6F6',\r\n            }}\r\n          >{obj.title}</div>\r\n          <div style={{ display: '-webkit-box', display: 'flex', padding: '15px 0' }}>\r\n            <img style={{ height: '64px', marginRight: '15px' }} src={obj.img} alt=\"\" />\r\n            <div style={{ lineHeight: 1 }}>\r\n              <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{obj.des}</div>\r\n              <div><span style={{ fontSize: '30px', color: '#FF6E27' }}>{rowID}</span>¥</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n    return (\r\n      <ListView\r\n        ref={el => this.lv = el}\r\n        initialListSize={this.state.data.length}\r\n        dataSource={this.state.dataSource}\r\n        renderHeader={() => <span>header</span>}\r\n        renderFooter={() => (<div style={{ padding: 30, textAlign: 'center' }}>\r\n          {this.state.isLoading ? 'Loading...' : 'Loaded'}\r\n        </div>)}\r\n        renderRow={row}\r\n        renderSeparator={separator}\r\n        className=\"am-list\"\r\n        pageSize={4}\r\n        useBodyScroll\r\n        onScroll={() => { console.log('scroll'); }}\r\n        scrollRenderAheadDistance={500}\r\n        onEndReached={this.onEndReached}\r\n        onEndReachedThreshold={10}\r\n      />\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}