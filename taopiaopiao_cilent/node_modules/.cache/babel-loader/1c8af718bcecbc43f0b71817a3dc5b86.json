{"ast":null,"code":"var _jsxFileName = \"E:\\\\H5\\\\react\\\\taopiaopiao\\\\src\\\\components\\\\List.js\";\n\n/* eslint no-dupe-keys: 0, no-mixed-operators: 0 */\nimport { ListView } from 'antd-mobile';\n\nfunction MyBody(props) {\n  return React.createElement(\"div\", {\n    className: \"am-list-body my-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    style: {\n      display: 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7\n    },\n    __self: this\n  }, \"you can custom body wrap element\"), props.children);\n}\n\nconst data = [{\n  img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n  title: 'Meet hotel',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n  title: 'McDonald\\'s invites you',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n  title: 'Eat the week',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}];\nconst NUM_SECTIONS = 5;\nconst NUM_ROWS_PER_SECTION = 5;\nlet pageIndex = 0;\nconst dataBlobs = {};\nlet sectionIDs = [];\nlet rowIDs = [];\n\nfunction genData(pIndex = 0) {\n  for (let i = 0; i < NUM_SECTIONS; i++) {\n    const ii = pIndex * NUM_SECTIONS + i;\n    const sectionName = \"Section \".concat(ii);\n    sectionIDs.push(sectionName);\n    dataBlobs[sectionName] = sectionName;\n    rowIDs[ii] = [];\n\n    for (let jj = 0; jj < NUM_ROWS_PER_SECTION; jj++) {\n      const rowName = \"S\".concat(ii, \", R\").concat(jj);\n      rowIDs[ii].push(rowName);\n      dataBlobs[rowName] = rowName;\n    }\n  }\n\n  sectionIDs = [...sectionIDs];\n  rowIDs = [...rowIDs];\n}\n\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onEndReached = event => {\n      // load new data\n      // hasMore: from backend data, indicates whether it is the last page, here is false\n      if (this.state.isLoading && !this.state.hasMore) {\n        return;\n      }\n\n      console.log('reach end', event);\n      this.setState({\n        isLoading: true\n      });\n      setTimeout(() => {\n        genData(++pageIndex);\n        this.setState({\n          dataSource: this.state.dataSource.cloneWithRowsAndSections(dataBlobs, sectionIDs, rowIDs),\n          isLoading: false\n        });\n      }, 1000);\n    };\n\n    const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n\n    const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n    const dataSource = new ListView.DataSource({\n      getRowData,\n      getSectionHeaderData: getSectionData,\n      rowHasChanged: (row1, row2) => row1 !== row2,\n      sectionHeaderHasChanged: (s1, s2) => s1 !== s2\n    });\n    this.state = {\n      dataSource,\n      isLoading: true,\n      height: document.documentElement.clientHeight * 3 / 4\n    };\n  }\n\n  componentDidMount() {\n    // you can scroll to the specified position\n    // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n    const hei = document.documentElement.clientHeight - ReactDOM.findDOMNode(this.lv).parentNode.offsetTop; // simulate initial Ajax\n\n    setTimeout(() => {\n      genData();\n      this.setState({\n        dataSource: this.state.dataSource.cloneWithRowsAndSections(dataBlobs, sectionIDs, rowIDs),\n        isLoading: false,\n        height: hei\n      });\n    }, 600);\n  } // If you use redux, the data maybe at props, you need use `componentWillReceiveProps`\n  // componentWillReceiveProps(nextProps) {\n  //   if (nextProps.dataSource !== this.props.dataSource) {\n  //     this.setState({\n  //       dataSource: this.state.dataSource.cloneWithRowsAndSections(nextProps.dataSource),\n  //     });\n  //   }\n  // }\n\n\n  render() {\n    const separator = (sectionID, rowID) => React.createElement(\"div\", {\n      key: \"\".concat(sectionID, \"-\").concat(rowID),\n      style: {\n        backgroundColor: '#F5F5F9',\n        height: 8,\n        borderTop: '1px solid #ECECED',\n        borderBottom: '1px solid #ECECED'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    });\n\n    let index = data.length - 1;\n\n    const row = (rowData, sectionID, rowID) => {\n      if (index < 0) {\n        index = data.length - 1;\n      }\n\n      const obj = data[index--];\n      return React.createElement(\"div\", {\n        key: rowID,\n        style: {\n          padding: '0 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          lineHeight: '50px',\n          color: '#888',\n          fontSize: 18,\n          borderBottom: '1px solid #F6F6F6'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, obj.title), React.createElement(\"div\", {\n        style: {\n          display: '-webkit-box',\n          display: 'flex',\n          padding: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: '64px',\n          marginRight: '15px'\n        },\n        src: obj.img,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          lineHeight: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, obj.des), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: '30px',\n          color: '#FF6E27'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"35\"), \"\\xA5 \", rowID))));\n    };\n\n    return React.createElement(ListView, {\n      ref: el => this.lv = el,\n      dataSource: this.state.dataSource,\n      renderHeader: () => React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"header\"),\n      renderFooter: () => React.createElement(\"div\", {\n        style: {\n          padding: 30,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, this.state.isLoading ? 'Loading...' : 'Loaded'),\n      renderSectionHeader: sectionData => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Task \".concat(sectionData.split(' ')[1])),\n      renderBodyComponent: () => React.createElement(MyBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }),\n      renderRow: row,\n      renderSeparator: separator,\n      style: {\n        height: this.state.height,\n        overflow: 'auto'\n      },\n      pageSize: 4,\n      onScroll: () => {\n        console.log('scroll');\n      },\n      scrollRenderAheadDistance: 500,\n      onEndReached: this.onEndReached,\n      onEndReachedThreshold: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    });\n  }\n\n}","map":{"version":3,"sources":["E:/H5/react/taopiaopiao/src/components/List.js"],"names":["ListView","MyBody","props","display","children","data","img","title","des","NUM_SECTIONS","NUM_ROWS_PER_SECTION","pageIndex","dataBlobs","sectionIDs","rowIDs","genData","pIndex","i","ii","sectionName","push","jj","rowName","List","React","Component","constructor","onEndReached","event","state","isLoading","hasMore","console","log","setState","setTimeout","dataSource","cloneWithRowsAndSections","getSectionData","dataBlob","sectionID","getRowData","rowID","DataSource","getSectionHeaderData","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","height","document","documentElement","clientHeight","componentDidMount","hei","ReactDOM","findDOMNode","lv","parentNode","offsetTop","render","separator","backgroundColor","borderTop","borderBottom","index","length","row","rowData","obj","padding","lineHeight","color","fontSize","marginRight","marginBottom","fontWeight","el","textAlign","sectionData","split","overflow"],"mappings":";;AAAA;AACA,SAASA,QAAT,QAAyB,aAAzB;;AAEA,SAASC,MAAT,CAAgBC,KAAhB,EAAuB;AACrB,SACE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADF,EAEGD,KAAK,CAACE,QAFT,CADF;AAMD;;AAED,MAAMC,IAAI,GAAG,CACX;AACEC,EAAAA,GAAG,EAAE,6DADP;AAEEC,EAAAA,KAAK,EAAE,YAFT;AAGEC,EAAAA,GAAG,EAAE;AAHP,CADW,EAMX;AACEF,EAAAA,GAAG,EAAE,6DADP;AAEEC,EAAAA,KAAK,EAAE,yBAFT;AAGEC,EAAAA,GAAG,EAAE;AAHP,CANW,EAWX;AACEF,EAAAA,GAAG,EAAE,6DADP;AAEEC,EAAAA,KAAK,EAAE,cAFT;AAGEC,EAAAA,GAAG,EAAE;AAHP,CAXW,CAAb;AAiBA,MAAMC,YAAY,GAAG,CAArB;AACA,MAAMC,oBAAoB,GAAG,CAA7B;AACA,IAAIC,SAAS,GAAG,CAAhB;AAEA,MAAMC,SAAS,GAAG,EAAlB;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,IAAIC,MAAM,GAAG,EAAb;;AACA,SAASC,OAAT,CAAiBC,MAAM,GAAG,CAA1B,EAA6B;AAC3B,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,YAApB,EAAkCQ,CAAC,EAAnC,EAAuC;AACrC,UAAMC,EAAE,GAAIF,MAAM,GAAGP,YAAV,GAA0BQ,CAArC;AACA,UAAME,WAAW,qBAAcD,EAAd,CAAjB;AACAL,IAAAA,UAAU,CAACO,IAAX,CAAgBD,WAAhB;AACAP,IAAAA,SAAS,CAACO,WAAD,CAAT,GAAyBA,WAAzB;AACAL,IAAAA,MAAM,CAACI,EAAD,CAAN,GAAa,EAAb;;AAEA,SAAK,IAAIG,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGX,oBAAtB,EAA4CW,EAAE,EAA9C,EAAkD;AAChD,YAAMC,OAAO,cAAOJ,EAAP,gBAAeG,EAAf,CAAb;AACAP,MAAAA,MAAM,CAACI,EAAD,CAAN,CAAWE,IAAX,CAAgBE,OAAhB;AACAV,MAAAA,SAAS,CAACU,OAAD,CAAT,GAAqBA,OAArB;AACD;AACF;;AACDT,EAAAA,UAAU,GAAG,CAAC,GAAGA,UAAJ,CAAb;AACAC,EAAAA,MAAM,GAAG,CAAC,GAAGA,MAAJ,CAAT;AACD;;AAEA,eAAe,MAAMS,IAAN,SAAmBC,KAAK,CAACC,SAAzB,CAAmC;AACjDC,EAAAA,WAAW,CAACxB,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA4CnByB,YA5CmB,GA4CHC,KAAD,IAAW;AACxB;AACA;AACA,UAAI,KAAKC,KAAL,CAAWC,SAAX,IAAwB,CAAC,KAAKD,KAAL,CAAWE,OAAxC,EAAiD;AAC/C;AACD;;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBL,KAAzB;AACA,WAAKM,QAAL,CAAc;AAAEJ,QAAAA,SAAS,EAAE;AAAb,OAAd;AACAK,MAAAA,UAAU,CAAC,MAAM;AACfpB,QAAAA,OAAO,CAAC,EAAEJ,SAAH,CAAP;AACA,aAAKuB,QAAL,CAAc;AACZE,UAAAA,UAAU,EAAE,KAAKP,KAAL,CAAWO,UAAX,CAAsBC,wBAAtB,CAA+CzB,SAA/C,EAA0DC,UAA1D,EAAsEC,MAAtE,CADA;AAEZgB,UAAAA,SAAS,EAAE;AAFC,SAAd;AAID,OANS,EAMP,IANO,CAAV;AAOD,KA3DkB;;AAEjB,UAAMQ,cAAc,GAAG,CAACC,QAAD,EAAWC,SAAX,KAAyBD,QAAQ,CAACC,SAAD,CAAxD;;AACA,UAAMC,UAAU,GAAG,CAACF,QAAD,EAAWC,SAAX,EAAsBE,KAAtB,KAAgCH,QAAQ,CAACG,KAAD,CAA3D;;AAEA,UAAMN,UAAU,GAAG,IAAIpC,QAAQ,CAAC2C,UAAb,CAAwB;AACzCF,MAAAA,UADyC;AAEzCG,MAAAA,oBAAoB,EAAEN,cAFmB;AAGzCO,MAAAA,aAAa,EAAE,CAACC,IAAD,EAAOC,IAAP,KAAgBD,IAAI,KAAKC,IAHC;AAIzCC,MAAAA,uBAAuB,EAAE,CAACC,EAAD,EAAKC,EAAL,KAAYD,EAAE,KAAKC;AAJH,KAAxB,CAAnB;AAOA,SAAKrB,KAAL,GAAa;AACXO,MAAAA,UADW;AAEXN,MAAAA,SAAS,EAAE,IAFA;AAGXqB,MAAAA,MAAM,EAAEC,QAAQ,CAACC,eAAT,CAAyBC,YAAzB,GAAwC,CAAxC,GAA4C;AAHzC,KAAb;AAKD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB;AACA;AAEA,UAAMC,GAAG,GAAGJ,QAAQ,CAACC,eAAT,CAAyBC,YAAzB,GAAwCG,QAAQ,CAACC,WAAT,CAAqB,KAAKC,EAA1B,EAA8BC,UAA9B,CAAyCC,SAA7F,CAJkB,CAKlB;;AACA1B,IAAAA,UAAU,CAAC,MAAM;AACfpB,MAAAA,OAAO;AACP,WAAKmB,QAAL,CAAc;AACZE,QAAAA,UAAU,EAAE,KAAKP,KAAL,CAAWO,UAAX,CAAsBC,wBAAtB,CAA+CzB,SAA/C,EAA0DC,UAA1D,EAAsEC,MAAtE,CADA;AAEZgB,QAAAA,SAAS,EAAE,KAFC;AAGZqB,QAAAA,MAAM,EAAEK;AAHI,OAAd;AAKD,KAPS,EAOP,GAPO,CAAV;AAQD,GAlCgD,CAoCjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAmBAM,EAAAA,MAAM,GAAG;AACP,UAAMC,SAAS,GAAG,CAACvB,SAAD,EAAYE,KAAZ,KAChB;AACE,MAAA,GAAG,YAAKF,SAAL,cAAkBE,KAAlB,CADL;AAEE,MAAA,KAAK,EAAE;AACLsB,QAAAA,eAAe,EAAE,SADZ;AAELb,QAAAA,MAAM,EAAE,CAFH;AAGLc,QAAAA,SAAS,EAAE,mBAHN;AAILC,QAAAA,YAAY,EAAE;AAJT,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;;AAWA,QAAIC,KAAK,GAAG9D,IAAI,CAAC+D,MAAL,GAAc,CAA1B;;AACA,UAAMC,GAAG,GAAG,CAACC,OAAD,EAAU9B,SAAV,EAAqBE,KAArB,KAA+B;AACzC,UAAIyB,KAAK,GAAG,CAAZ,EAAe;AACbA,QAAAA,KAAK,GAAG9D,IAAI,CAAC+D,MAAL,GAAc,CAAtB;AACD;;AACD,YAAMG,GAAG,GAAGlE,IAAI,CAAC8D,KAAK,EAAN,CAAhB;AACA,aACE;AAAK,QAAA,GAAG,EAAEzB,KAAV;AAAiB,QAAA,KAAK,EAAE;AAAE8B,UAAAA,OAAO,EAAE;AAAX,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,KAAK,EAAE;AACLC,UAAAA,UAAU,EAAE,MADP;AAELC,UAAAA,KAAK,EAAE,MAFF;AAGLC,UAAAA,QAAQ,EAAE,EAHL;AAILT,UAAAA,YAAY,EAAE;AAJT,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOEK,GAAG,CAAChE,KAPN,CADF,EASE;AAAK,QAAA,KAAK,EAAE;AAAEJ,UAAAA,OAAO,EAAE,aAAX;AAA0BA,UAAAA,OAAO,EAAE,MAAnC;AAA2CqE,UAAAA,OAAO,EAAE;AAApD,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAE;AAAErB,UAAAA,MAAM,EAAE,MAAV;AAAkByB,UAAAA,WAAW,EAAE;AAA/B,SAAZ;AAAqD,QAAA,GAAG,EAAEL,GAAG,CAACjE,GAA9D;AAAmE,QAAA,GAAG,EAAC,EAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAK,QAAA,KAAK,EAAE;AAAEmE,UAAAA,UAAU,EAAE;AAAd,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAE;AAAEI,UAAAA,YAAY,EAAE,KAAhB;AAAuBC,UAAAA,UAAU,EAAE;AAAnC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0DP,GAAG,CAAC/D,GAA9D,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAM,QAAA,KAAK,EAAE;AAAEmE,UAAAA,QAAQ,EAAE,MAAZ;AAAoBD,UAAAA,KAAK,EAAE;AAA3B,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAL,WAAsEhC,KAAtE,CAFF,CAFF,CATF,CADF;AAmBD,KAxBD;;AA0BA,WACE,oBAAC,QAAD;AACE,MAAA,GAAG,EAAEqC,EAAE,IAAI,KAAKpB,EAAL,GAAUoB,EADvB;AAEE,MAAA,UAAU,EAAE,KAAKlD,KAAL,CAAWO,UAFzB;AAGE,MAAA,YAAY,EAAE,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHtB;AAIE,MAAA,YAAY,EAAE,MAAO;AAAK,QAAA,KAAK,EAAE;AAAEoC,UAAAA,OAAO,EAAE,EAAX;AAAeQ,UAAAA,SAAS,EAAE;AAA1B,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAClB,KAAKnD,KAAL,CAAWC,SAAX,GAAuB,YAAvB,GAAsC,QADpB,CAJvB;AAOE,MAAA,mBAAmB,EAAEmD,WAAW,IAC9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAcA,WAAW,CAACC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAd,EARJ;AAUE,MAAA,mBAAmB,EAAE,MAAM,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAV7B;AAWE,MAAA,SAAS,EAAEb,GAXb;AAYE,MAAA,eAAe,EAAEN,SAZnB;AAaE,MAAA,KAAK,EAAE;AACLZ,QAAAA,MAAM,EAAE,KAAKtB,KAAL,CAAWsB,MADd;AAELgC,QAAAA,QAAQ,EAAE;AAFL,OAbT;AAiBE,MAAA,QAAQ,EAAE,CAjBZ;AAkBE,MAAA,QAAQ,EAAE,MAAM;AAAEnD,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AAAwB,OAlB5C;AAmBE,MAAA,yBAAyB,EAAE,GAnB7B;AAoBE,MAAA,YAAY,EAAE,KAAKN,YApBrB;AAqBE,MAAA,qBAAqB,EAAE,EArBzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAyBD;;AA9HgD","sourcesContent":["/* eslint no-dupe-keys: 0, no-mixed-operators: 0 */\r\nimport { ListView } from 'antd-mobile';\r\n\r\nfunction MyBody(props) {\r\n  return (\r\n    <div className=\"am-list-body my-body\">\r\n      <span style={{ display: 'none' }}>you can custom body wrap element</span>\r\n      {props.children}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst data = [\r\n  {\r\n    img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\r\n    title: 'Meet hotel',\r\n    des: '不是所有的兼职汪都需要风吹日晒',\r\n  },\r\n  {\r\n    img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\r\n    title: 'McDonald\\'s invites you',\r\n    des: '不是所有的兼职汪都需要风吹日晒',\r\n  },\r\n  {\r\n    img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\r\n    title: 'Eat the week',\r\n    des: '不是所有的兼职汪都需要风吹日晒',\r\n  },\r\n];\r\nconst NUM_SECTIONS = 5;\r\nconst NUM_ROWS_PER_SECTION = 5;\r\nlet pageIndex = 0;\r\n\r\nconst dataBlobs = {};\r\nlet sectionIDs = [];\r\nlet rowIDs = [];\r\nfunction genData(pIndex = 0) {\r\n  for (let i = 0; i < NUM_SECTIONS; i++) {\r\n    const ii = (pIndex * NUM_SECTIONS) + i;\r\n    const sectionName = `Section ${ii}`;\r\n    sectionIDs.push(sectionName);\r\n    dataBlobs[sectionName] = sectionName;\r\n    rowIDs[ii] = [];\r\n\r\n    for (let jj = 0; jj < NUM_ROWS_PER_SECTION; jj++) {\r\n      const rowName = `S${ii}, R${jj}`;\r\n      rowIDs[ii].push(rowName);\r\n      dataBlobs[rowName] = rowName;\r\n    }\r\n  }\r\n  sectionIDs = [...sectionIDs];\r\n  rowIDs = [...rowIDs];\r\n}\r\n\r\n export default class List extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\r\n    const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\r\n\r\n    const dataSource = new ListView.DataSource({\r\n      getRowData,\r\n      getSectionHeaderData: getSectionData,\r\n      rowHasChanged: (row1, row2) => row1 !== row2,\r\n      sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\r\n    });\r\n\r\n    this.state = {\r\n      dataSource,\r\n      isLoading: true,\r\n      height: document.documentElement.clientHeight * 3 / 4,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // you can scroll to the specified position\r\n    // setTimeout(() => this.lv.scrollTo(0, 120), 800);\r\n\r\n    const hei = document.documentElement.clientHeight - ReactDOM.findDOMNode(this.lv).parentNode.offsetTop;\r\n    // simulate initial Ajax\r\n    setTimeout(() => {\r\n      genData();\r\n      this.setState({\r\n        dataSource: this.state.dataSource.cloneWithRowsAndSections(dataBlobs, sectionIDs, rowIDs),\r\n        isLoading: false,\r\n        height: hei,\r\n      });\r\n    }, 600);\r\n  }\r\n\r\n  // If you use redux, the data maybe at props, you need use `componentWillReceiveProps`\r\n  // componentWillReceiveProps(nextProps) {\r\n  //   if (nextProps.dataSource !== this.props.dataSource) {\r\n  //     this.setState({\r\n  //       dataSource: this.state.dataSource.cloneWithRowsAndSections(nextProps.dataSource),\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  onEndReached = (event) => {\r\n    // load new data\r\n    // hasMore: from backend data, indicates whether it is the last page, here is false\r\n    if (this.state.isLoading && !this.state.hasMore) {\r\n      return;\r\n    }\r\n    console.log('reach end', event);\r\n    this.setState({ isLoading: true });\r\n    setTimeout(() => {\r\n      genData(++pageIndex);\r\n      this.setState({\r\n        dataSource: this.state.dataSource.cloneWithRowsAndSections(dataBlobs, sectionIDs, rowIDs),\r\n        isLoading: false,\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  render() {\r\n    const separator = (sectionID, rowID) => (\r\n      <div\r\n        key={`${sectionID}-${rowID}`}\r\n        style={{\r\n          backgroundColor: '#F5F5F9',\r\n          height: 8,\r\n          borderTop: '1px solid #ECECED',\r\n          borderBottom: '1px solid #ECECED',\r\n        }}\r\n      />\r\n    );\r\n    let index = data.length - 1;\r\n    const row = (rowData, sectionID, rowID) => {\r\n      if (index < 0) {\r\n        index = data.length - 1;\r\n      }\r\n      const obj = data[index--];\r\n      return (\r\n        <div key={rowID} style={{ padding: '0 15px' }}>\r\n          <div\r\n            style={{\r\n              lineHeight: '50px',\r\n              color: '#888',\r\n              fontSize: 18,\r\n              borderBottom: '1px solid #F6F6F6',\r\n            }}\r\n          >{obj.title}</div>\r\n          <div style={{ display: '-webkit-box', display: 'flex', padding: '15px 0' }}>\r\n            <img style={{ height: '64px', marginRight: '15px' }} src={obj.img} alt=\"\" />\r\n            <div style={{ lineHeight: 1 }}>\r\n              <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{obj.des}</div>\r\n              <div><span style={{ fontSize: '30px', color: '#FF6E27' }}>35</span>¥ {rowID}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <ListView\r\n        ref={el => this.lv = el}\r\n        dataSource={this.state.dataSource}\r\n        renderHeader={() => <span>header</span>}\r\n        renderFooter={() => (<div style={{ padding: 30, textAlign: 'center' }}>\r\n          {this.state.isLoading ? 'Loading...' : 'Loaded'}\r\n        </div>)}\r\n        renderSectionHeader={sectionData => (\r\n          <div>{`Task ${sectionData.split(' ')[1]}`}</div>\r\n        )}\r\n        renderBodyComponent={() => <MyBody />}\r\n        renderRow={row}\r\n        renderSeparator={separator}\r\n        style={{\r\n          height: this.state.height,\r\n          overflow: 'auto',\r\n        }}\r\n        pageSize={4}\r\n        onScroll={() => { console.log('scroll'); }}\r\n        scrollRenderAheadDistance={500}\r\n        onEndReached={this.onEndReached}\r\n        onEndReachedThreshold={10}\r\n      />\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}