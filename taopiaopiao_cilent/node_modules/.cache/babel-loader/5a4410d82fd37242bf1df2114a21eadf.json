{"ast":null,"code":"var _jsxFileName = \"E:\\\\H5\\\\react\\\\taopiaopiao\\\\src\\\\views\\\\Cinema.js\";\nimport React, { Component } from 'react';\nimport { List, Tag } from 'antd-mobile';\nimport $ from 'jquery';\nimport Swiper from '../components/Swiper';\nimport '../components/Cinema.css';\nconst Item = List.Item;\nconst Brief = Item.Brief;\nexport default class Cinema extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // item: this.props.location.query,\n      item: {\n        id: 1,\n        cinname: \"重庆博纳电影院\",\n        price: 19.9,\n        address: \"沙坪坝区凤天大道37号（第三军医大对面）\",\n        act1: 1,\n        act2: 1,\n        act3: 0,\n        act4: 1\n      },\n      data2: []\n    };\n  }\n\n  componentDidMount() {\n    let that = this;\n    let id = this.state.item.id;\n    $.ajax({\n      url: \"http://localhost:9000/cplayplan\",\n      type: \"GET\",\n      data: {\n        cid: id\n      },\n      dataType: \"text\",\n\n      success(data) {\n        if (data) {\n          data = JSON.parse(data);\n          that.setState({\n            data2: data\n          });\n          console.log(that.state.data2);\n        } else {}\n      },\n\n      error() {}\n\n    });\n  } //跳转到购买电影票界面\n\n\n  toPurchase(cinname, movietitle, movieimage, playprice, playdate, playtime) {\n    this.props.history.push({\n      pathname: \"/purchase\",\n      query: {\n        cinname: cinname,\n        movietitle: movietitle,\n        movieimage: movieimage,\n        playprice: playprice,\n        playdate: playdate,\n        playtime: playtime\n      }\n    });\n  } //渲染日期\n\n\n  time() {\n    let date = this.state.data2[0];\n\n    if (date != undefined) {\n      date = date.playdate.substring(5, 10);\n      console.log(date);\n      return React.createElement(\"div\", {\n        className: \"datecontainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"datetitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"\\u65E5\\u671F\"), React.createElement(\"div\", {\n        className: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, date));\n    }\n  } //渲染播放列表\n\n\n  list() {\n    const listItems = this.state.data2.map((item, index) => {\n      //电影开始时间\n      let playtime = item.playtime.substring(0, 5); //电影结束的小时数\n\n      let hour = Number(playtime.substring(0, 2)); //电影结束的分钟数\n\n      let minute = Number(playtime.substring(3, 5)) + Number(item.movielength);\n\n      if (minute > 60) {\n        hour = hour + Number(Math.floor(minute / 60));\n        minute = Math.floor(minute % 60);\n\n        if (minute < 10) {\n          minute = \"0\" + minute;\n        }\n      }\n\n      let quiettime = hour + \":\" + minute;\n      return React.createElement(\"div\", {\n        className: \"play\",\n        key: index,\n        onClick: this.toPurchase.bind(this, item.cinname, item.movietitle, item.movieimage, item.playprice, item.playdate, item.playtime),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(List, {\n        renderHeader: () => 'Align Vertical Center',\n        className: \"my-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Item, {\n        multipleLine: true,\n        extra: '￥' + item.playprice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, playtime, \" \", React.createElement(Brief, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, quiettime + '散场'), React.createElement(\"div\", {\n        className: \"cinname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, item.movietitle), React.createElement(\"div\", {\n        className: \"sort\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, item.movietype))));\n    });\n    return listItems;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(List, {\n      className: \"my-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Item, {\n      multipleLine: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, this.state.item.cinname), \" \", React.createElement(Brief, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, this.state.item.address), React.createElement(Tag, {\n      small: true,\n      style: {\n        color: '#FF2E62'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, this.state.item.act1 == 1 ? \"可领影城劵\" : \"\"), React.createElement(Tag, {\n      small: true,\n      style: {\n        color: '#FF9C1C'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.state.item.act2 == 1 ? \"特价票\" : \"\"), React.createElement(Tag, {\n      small: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, this.state.item.act3 == 1 ? \"vip厅\" : \"普通厅\"), React.createElement(Tag, {\n      small: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, this.state.item.act4 == 1 ? \"可停车\" : \"不可停车\"))), React.createElement(Swiper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.time()), this.list()));\n  }\n\n}","map":{"version":3,"sources":["E:/H5/react/taopiaopiao/src/views/Cinema.js"],"names":["React","Component","List","Tag","$","Swiper","Item","Brief","Cinema","constructor","props","state","item","id","cinname","price","address","act1","act2","act3","act4","data2","componentDidMount","that","ajax","url","type","data","cid","dataType","success","JSON","parse","setState","console","log","error","toPurchase","movietitle","movieimage","playprice","playdate","playtime","history","push","pathname","query","time","date","undefined","substring","list","listItems","map","index","hour","Number","minute","movielength","Math","floor","quiettime","bind","movietype","render","fontWeight","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { List, Tag, } from 'antd-mobile';\r\nimport $ from 'jquery';\r\nimport Swiper from '../components/Swiper'\r\nimport '../components/Cinema.css'\r\nconst Item = List.Item;\r\nconst Brief = Item.Brief;\r\nexport default class Cinema extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      // item: this.props.location.query,\r\n      item: {\r\n        id: 1,\r\n        cinname: \"重庆博纳电影院\",\r\n        price: 19.9,\r\n        address: \"沙坪坝区凤天大道37号（第三军医大对面）\",\r\n        act1: 1,\r\n        act2: 1,\r\n        act3: 0,\r\n        act4: 1,\r\n      },\r\n\r\n      data2: []\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    let that = this;\r\n    let id = this.state.item.id;\r\n    $.ajax({\r\n      url: \"http://localhost:9000/cplayplan\",\r\n      type: \"GET\",\r\n      data: {\r\n        cid: id\r\n      },\r\n      dataType: \"text\",\r\n      success(data) {\r\n        if (data) {\r\n          data = JSON.parse(data);\r\n          that.setState({\r\n            data2: data\r\n          })\r\n          console.log(that.state.data2);\r\n        }\r\n        else {\r\n        }\r\n      },\r\n      error() {\r\n\r\n      }\r\n    })\r\n  }\r\n  //跳转到购买电影票界面\r\n  toPurchase(cinname,movietitle,movieimage,playprice,playdate,playtime){\r\n    this.props.history.push({\r\n      pathname: \"/purchase\",\r\n      query: {\r\n          cinname: cinname,\r\n          movietitle: movietitle,\r\n          movieimage:movieimage,\r\n          playprice: playprice,\r\n          playdate: playdate,\r\n          playtime:playtime\r\n      }\r\n  })\r\n}\r\n  //渲染日期\r\n  time(){\r\n    let date=this.state.data2[0];\r\n    if(date!=undefined){\r\n      date=date.playdate.substring(5,10)\r\n      console.log(date);\r\n      return(\r\n        <div className=\"datecontainer\">\r\n          <div className=\"datetitle\">日期</div>\r\n          <div className=\"date\">{date}</div>\r\n        </div>\r\n      )\r\n    }\r\n    \r\n  }\r\n  //渲染播放列表\r\n  list() {\r\n    const listItems = this.state.data2.map((item,index) => {\r\n      //电影开始时间\r\n      let playtime=item.playtime.substring(0,5);\r\n      //电影结束的小时数\r\n      let hour=Number(playtime.substring(0,2));\r\n      //电影结束的分钟数\r\n      let minute=Number(playtime.substring(3,5))+Number(item.movielength);\r\n      if(minute>60){\r\n        hour=hour+Number(Math.floor(minute/60));\r\n        minute=Math.floor(minute%60);\r\n        if(minute<10){\r\n          minute=\"0\"+minute;\r\n        }\r\n      }\r\n      let quiettime=hour+\":\"+minute;\r\n      return (\r\n        <div className=\"play\" key={index} onClick={this.toPurchase.bind(this,item.cinname,item.movietitle,item.movieimage,item.playprice,item.playdate,item.playtime)}>\r\n          <List renderHeader={() => 'Align Vertical Center'} className=\"my-list\">\r\n            <Item multipleLine extra={'￥'+item.playprice}>\r\n              {playtime} <Brief>{quiettime+'散场'}</Brief>\r\n              <div className=\"cinname\">{item.movietitle}</div>\r\n              <div className=\"sort\">{item.movietype}</div>\r\n            </Item>\r\n\r\n          </List>\r\n        </div>\r\n      )\r\n    }\r\n    );\r\n    return listItems\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <List className=\"my-list\">\r\n          <Item multipleLine >\r\n            <span style={{ fontWeight: 'bold' }}>\r\n              {this.state.item.cinname}\r\n            </span> <Brief>{this.state.item.address}</Brief>\r\n            <Tag small style={{ color: '#FF2E62' }}>{this.state.item.act1 == 1 ? \"可领影城劵\" : \"\"}</Tag>\r\n            <Tag small style={{ color: '#FF9C1C' }}>{this.state.item.act2 == 1 ? \"特价票\" : \"\"}</Tag>\r\n            <Tag small>{this.state.item.act3 == 1 ? \"vip厅\" : \"普通厅\"}</Tag>\r\n            <Tag small>{this.state.item.act4 == 1 ? \"可停车\" : \"不可停车\"}</Tag>\r\n          </Item>\r\n        </List>\r\n        <Swiper></Swiper>\r\n        <div>\r\n          <div>{this.time()}</div>\r\n          {this.list()}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}