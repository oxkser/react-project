{"ast":null,"code":"import _classCallCheck from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\H5\\\\react\\\\taopiaopiao\\\\taopiaopiao_cilent\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import cookie from'react-cookies';import $ from'jquery';var login=/*#__PURE__*/function(_Component){_inherits(login,_Component);function login(){_classCallCheck(this,login);return _possibleConstructorReturn(this,_getPrototypeOf(login).call(this));}_createClass(login,[{key:\"login\",value:function login(){var login=document.getElementsByName('user')[0].value;var password=document.getElementsByName(\"password\")[0].value;var that=this;$.ajax({url:\"http://localhost:9000/login\",type:\"POST\",data:{loginid:login,pwd:password},dataType:\"text\",success:function success(user){if(user){user=JSON.parse(user);var obj={id:user.id,name:user.username,avatar:user.userimage};obj=JSON.stringify(obj);// cookie.save('myuser', { id: user.id, name: user.username,avatar:user.userimage }, { path: '/' });\nlocalStorage.setItem(\"myuser\",obj);console.log(JSON.parse(localStorage.getItem(\"myuser\")));that.props.history.push('/');}else{console.log(\"帐号或密码错误\");alert(\"账号密码错误\");}},error:function error(){}});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{style:{backgroundColor:'white',height:'100%',textAlign:'center'}},React.createElement(\"div\",{className:\"bank\"}),React.createElement(\"div\",{className:\"logo\"}),React.createElement(\"div\",{className:\"input\"},React.createElement(\"input\",{type:\"text\",className:\"user\",name:\"user\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u8D26\\u53F7\"}),React.createElement(\"br\",null),React.createElement(\"input\",{type:\"password\",className:\"password\",name:\"password\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",id:\"\"})),React.createElement(\"button\",{type:\"submit\",className:\"login\",onClick:this.login.bind(this)},\"\\u767B\\u5F55\"));}}]);return login;}(Component);export{login as default};","map":{"version":3,"sources":["E:/H5/react/taopiaopiao/taopiaopiao_cilent/src/views/Login.js"],"names":["React","Component","cookie","$","login","document","getElementsByName","value","password","that","ajax","url","type","data","loginid","pwd","dataType","success","user","JSON","parse","obj","id","name","username","avatar","userimage","stringify","localStorage","setItem","console","log","getItem","props","history","push","alert","error","backgroundColor","height","textAlign","bind"],"mappings":"kqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,eAAnB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,C,GACqBC,CAAAA,K,+DACjB,gBAAa,uGAEZ,C,uDACO,CACJ,GAAIA,CAAAA,KAAK,CAAGC,QAAQ,CAACC,iBAAT,CAA2B,MAA3B,EAAmC,CAAnC,EAAsCC,KAAlD,CACA,GAAIC,CAAAA,QAAQ,CAAGH,QAAQ,CAACC,iBAAT,CAA2B,UAA3B,EAAuC,CAAvC,EAA0CC,KAAzD,CACA,GAAIE,CAAAA,IAAI,CAAG,IAAX,CACAN,CAAC,CAACO,IAAF,CAAO,CACLC,GAAG,CAAE,6BADA,CAELC,IAAI,CAAE,MAFD,CAGLC,IAAI,CAAE,CACJC,OAAO,CAAEV,KADL,CAEJW,GAAG,CAAEP,QAFD,CAHD,CAOLQ,QAAQ,CAAE,MAPL,CAQLC,OARK,kBAQGC,IARH,CAQS,CACZ,GAAIA,IAAJ,CAAU,CACRA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAP,CACA,GAAIG,CAAAA,GAAG,CAAC,CAAEC,EAAE,CAAEJ,IAAI,CAACI,EAAX,CAAeC,IAAI,CAAEL,IAAI,CAACM,QAA1B,CAAmCC,MAAM,CAACP,IAAI,CAACQ,SAA/C,CAAR,CACAL,GAAG,CAACF,IAAI,CAACQ,SAAL,CAAeN,GAAf,CAAJ,CACA;AACAO,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA8BR,GAA9B,EACAS,OAAO,CAACC,GAAR,CAAaZ,IAAI,CAACC,KAAL,CAAWQ,YAAY,CAACI,OAAb,CAAqB,QAArB,CAAX,CAAb,EACAvB,IAAI,CAACwB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,CARD,IASK,CACHL,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAK,KAAK,CAAC,QAAD,CAAL,CACD,CAEF,CAvBI,CAwBLC,KAxBK,iBAwBG,CACP,CAzBI,CAAP,EA4BD,C,uCACM,CACL,MACI,4BAAK,KAAK,CAAE,CAAEC,eAAe,CAAE,OAAnB,CAA4BC,MAAM,CAAE,MAApC,CAA4CC,SAAS,CAAE,QAAvD,CAAZ,EACA,2BAAK,SAAS,CAAC,MAAf,EADA,CAEA,2BAAK,SAAS,CAAC,MAAf,EAFA,CAGA,2BAAK,SAAS,CAAC,OAAf,EACE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,MAA7B,CAAoC,IAAI,CAAC,MAAzC,CAAgD,WAAW,CAAC,gCAA5D,EADF,CACwE,8BADxE,CAEE,6BAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,UAAjC,CAA4C,IAAI,CAAC,UAAjD,CAA4D,WAAW,CAAC,gCAAxE,CAAgF,EAAE,CAAC,EAAnF,EAFF,CAHA,CAOA,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,OAAhC,CAAwC,OAAO,CAAE,KAAKpC,KAAL,CAAWqC,IAAX,CAAgB,IAAhB,CAAjD,iBAPA,CADJ,CAWH,C,mBAjD8BxC,S,SAAdG,K","sourcesContent":["import React, { Component } from 'react'\r\nimport cookie from 'react-cookies'\r\nimport $ from 'jquery';\r\nexport default class login extends Component {\r\n    constructor(){\r\n        super()\r\n    }\r\n    login() {\r\n        let login = document.getElementsByName('user')[0].value;\r\n        let password = document.getElementsByName(\"password\")[0].value;\r\n        let that = this;\r\n        $.ajax({\r\n          url: \"http://localhost:9000/login\",\r\n          type: \"POST\",\r\n          data: {\r\n            loginid: login,\r\n            pwd: password\r\n          },\r\n          dataType: \"text\",\r\n          success(user) {\r\n            if (user) {\r\n              user = JSON.parse(user);\r\n              let obj={ id: user.id, name: user.username,avatar:user.userimage };\r\n              obj=JSON.stringify(obj);\r\n              // cookie.save('myuser', { id: user.id, name: user.username,avatar:user.userimage }, { path: '/' });\r\n              localStorage.setItem(\"myuser\",obj);\r\n              console.log( JSON.parse(localStorage.getItem(\"myuser\")))\r\n              that.props.history.push('/');\r\n            }\r\n            else {\r\n              console.log(\"帐号或密码错误\");\r\n              alert(\"账号密码错误\");\r\n            }\r\n            \r\n          },\r\n          error() {\r\n          }\r\n        })\r\n        \r\n      }\r\n    render() {\r\n        return (\r\n            <div style={{ backgroundColor: 'white', height: '100%', textAlign: 'center' }}>\r\n            <div className=\"bank\"></div>\r\n            <div className=\"logo\"></div>\r\n            <div className='input'>\r\n              <input type=\"text\" className=\"user\" name=\"user\" placeholder=\"请输入账号\" /><br />\r\n              <input type=\"password\" className=\"password\" name=\"password\" placeholder=\"请输入密码\" id=\"\" />\r\n            </div>\r\n            <button type=\"submit\" className=\"login\" onClick={this.login.bind(this)}>登录</button>\r\n          </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}